# direnv configuration 
# Run `direnv allow` to enable

# Source .env file if it exists (contains secrets, not in git)
if [[ -f .env ]]; then
    log_status "Loading .env variables..."
    dotenv .env
fi

# Create and activate uv virtual environment
if command -v uv &> /dev/null; then
    # Create venv if it doesn't exist
    if [[ ! -d .venv ]]; then
        log_status "Creating virtual environment with uv..."
        uv venv .venv
    fi

    # Sync dependencies
    if [[ -f pyproject.toml ]]; then
        log_status "Syncing dependencies with uv..."
        uv sync --quiet --native-tls --extra dev
    fi

    # Activate the virtual environment
    source .venv/bin/activate
else
    log_error "uv not found. Please install uv: https://docs.astral.sh/uv/"
fi
